version: '3'
services: 
  xrayr: 
    container_name: xrayr
    image: crackair/xrayr:latest
    volumes:
      - ./config:/etc/XrayR/
    logging:
      driver: "json-file"
      options:
        max-size: "10m"      
    restart: always
    network_mode: host
    
  nginx:
    image: nginx:mainline-alpine
    container_name: nginx
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/ssl:/etc/nginx/ssl/
      - ./logs:/var/log/nginx/
    network_mode: host
    logging:
      driver: "json-file"
      options:
        max-size: "10m"    
    restart: always
    
  gost:
    image: ginuerzh/gost
    container_name: gost
    volumes:
      - ./gost:/etc/gost/    
    restart: always
    network_mode: host
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
    command: -C /etc/gost/gost.json
